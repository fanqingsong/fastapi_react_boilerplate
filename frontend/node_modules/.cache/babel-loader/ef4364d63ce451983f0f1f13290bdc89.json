{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { useState, useCallback, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport { useListContext, useResourceContext } from 'ra-core';\nimport { FilterButtonMenuItem } from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nimport { FilterContext } from '../FilterContext';\nvar useStyles = makeStyles({\n  root: {\n    display: 'inline-block'\n  }\n}, {\n  name: 'RaFilterButton'\n});\n\nvar FilterButton = function (props) {\n  var filtersProp = props.filters,\n      classesOverride = props.classes,\n      className = props.className,\n      rest = __rest(props, [\"filters\", \"classes\", \"className\"]);\n\n  var filters = useContext(FilterContext) || filtersProp;\n  var resource = useResourceContext(props);\n\n  var _a = useListContext(props),\n      _b = _a.displayedFilters,\n      displayedFilters = _b === void 0 ? {} : _b,\n      filterValues = _a.filterValues,\n      showFilter = _a.showFilter;\n\n  var _c = useState(false),\n      open = _c[0],\n      setOpen = _c[1];\n\n  var anchorEl = useRef();\n  var classes = useStyles(props);\n\n  if (filters === undefined) {\n    throw new Error('FilterButton requires filters prop to be set');\n  }\n\n  var hiddenFilters = filters.filter(function (filterElement) {\n    return !filterElement.props.alwaysOn && !displayedFilters[filterElement.props.source] && typeof lodashGet(filterValues, filterElement.props.source) === 'undefined';\n  });\n  var handleClickButton = useCallback(function (event) {\n    // This prevents ghost click.\n    event.preventDefault();\n    setOpen(true);\n    anchorEl.current = event.currentTarget;\n  }, [anchorEl, setOpen]);\n  var handleRequestClose = useCallback(function () {\n    setOpen(false);\n  }, [setOpen]);\n  var handleShow = useCallback(function (_a) {\n    var source = _a.source,\n        defaultValue = _a.defaultValue;\n    showFilter(source, defaultValue);\n    setOpen(false);\n  }, [showFilter, setOpen]);\n  if (hiddenFilters.length === 0) return null;\n  return React.createElement(\"div\", __assign({\n    className: classnames(classes.root, className)\n  }, sanitizeRestProps(rest)), React.createElement(Button, {\n    className: \"add-filter\",\n    label: \"ra.action.add_filter\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClickButton\n  }, React.createElement(ContentFilter, null)), React.createElement(Menu, {\n    open: open,\n    anchorEl: anchorEl.current,\n    onClose: handleRequestClose\n  }, hiddenFilters.map(function (filterElement, index) {\n    return React.createElement(FilterButtonMenuItem, {\n      key: filterElement.props.source,\n      filter: filterElement,\n      resource: resource,\n      onShow: handleShow,\n      autoFocus: index === 0\n    });\n  })));\n};\n\nvar sanitizeRestProps = function (_a) {\n  var _b = _a.displayedFilters,\n      displayedFilters = _b === void 0 ? null : _b,\n      _c = _a.filterValues,\n      filterValues = _c === void 0 ? null : _c,\n      _d = _a.showFilter,\n      showFilter = _d === void 0 ? null : _d,\n      rest = __rest(_a, [\"displayedFilters\", \"filterValues\", \"showFilter\"]);\n\n  return rest;\n};\n\nFilterButton.propTypes = {\n  resource: PropTypes.string,\n  filters: PropTypes.arrayOf(PropTypes.node),\n  displayedFilters: PropTypes.object,\n  filterValues: PropTypes.object,\n  showFilter: PropTypes.func,\n  classes: PropTypes.object,\n  className: PropTypes.string\n};\nexport default FilterButton;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useState","useCallback","useRef","useContext","PropTypes","Menu","makeStyles","ContentFilter","classnames","lodashGet","useListContext","useResourceContext","FilterButtonMenuItem","Button","FilterContext","useStyles","root","display","name","FilterButton","props","filtersProp","filters","classesOverride","classes","className","rest","resource","_a","_b","displayedFilters","filterValues","showFilter","_c","open","setOpen","anchorEl","undefined","Error","hiddenFilters","filter","filterElement","alwaysOn","source","handleClickButton","event","preventDefault","current","currentTarget","handleRequestClose","handleShow","defaultValue","createElement","sanitizeRestProps","label","onClick","onClose","map","index","key","onShow","autoFocus","_d","propTypes","string","arrayOf","node","object","func"],"sources":["/app/node_modules/ra-ui-materialui/esm/list/filter/FilterButton.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { useState, useCallback, useRef, useContext, } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport { useListContext, useResourceContext } from 'ra-core';\nimport { FilterButtonMenuItem } from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nimport { FilterContext } from '../FilterContext';\nvar useStyles = makeStyles({\n    root: { display: 'inline-block' },\n}, { name: 'RaFilterButton' });\nvar FilterButton = function (props) {\n    var filtersProp = props.filters, classesOverride = props.classes, className = props.className, rest = __rest(props, [\"filters\", \"classes\", \"className\"]);\n    var filters = useContext(FilterContext) || filtersProp;\n    var resource = useResourceContext(props);\n    var _a = useListContext(props), _b = _a.displayedFilters, displayedFilters = _b === void 0 ? {} : _b, filterValues = _a.filterValues, showFilter = _a.showFilter;\n    var _c = useState(false), open = _c[0], setOpen = _c[1];\n    var anchorEl = useRef();\n    var classes = useStyles(props);\n    if (filters === undefined) {\n        throw new Error('FilterButton requires filters prop to be set');\n    }\n    var hiddenFilters = filters.filter(function (filterElement) {\n        return !filterElement.props.alwaysOn &&\n            !displayedFilters[filterElement.props.source] &&\n            typeof lodashGet(filterValues, filterElement.props.source) ===\n                'undefined';\n    });\n    var handleClickButton = useCallback(function (event) {\n        // This prevents ghost click.\n        event.preventDefault();\n        setOpen(true);\n        anchorEl.current = event.currentTarget;\n    }, [anchorEl, setOpen]);\n    var handleRequestClose = useCallback(function () {\n        setOpen(false);\n    }, [setOpen]);\n    var handleShow = useCallback(function (_a) {\n        var source = _a.source, defaultValue = _a.defaultValue;\n        showFilter(source, defaultValue);\n        setOpen(false);\n    }, [showFilter, setOpen]);\n    if (hiddenFilters.length === 0)\n        return null;\n    return (React.createElement(\"div\", __assign({ className: classnames(classes.root, className) }, sanitizeRestProps(rest)),\n        React.createElement(Button, { className: \"add-filter\", label: \"ra.action.add_filter\", \"aria-haspopup\": \"true\", onClick: handleClickButton },\n            React.createElement(ContentFilter, null)),\n        React.createElement(Menu, { open: open, anchorEl: anchorEl.current, onClose: handleRequestClose }, hiddenFilters.map(function (filterElement, index) { return (React.createElement(FilterButtonMenuItem, { key: filterElement.props.source, filter: filterElement, resource: resource, onShow: handleShow, autoFocus: index === 0 })); }))));\n};\nvar sanitizeRestProps = function (_a) {\n    var _b = _a.displayedFilters, displayedFilters = _b === void 0 ? null : _b, _c = _a.filterValues, filterValues = _c === void 0 ? null : _c, _d = _a.showFilter, showFilter = _d === void 0 ? null : _d, rest = __rest(_a, [\"displayedFilters\", \"filterValues\", \"showFilter\"]);\n    return rest;\n};\nFilterButton.propTypes = {\n    resource: PropTypes.string,\n    filters: PropTypes.arrayOf(PropTypes.node),\n    displayedFilters: PropTypes.object,\n    filterValues: PropTypes.object,\n    showFilter: PropTypes.func,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n};\nexport default FilterButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}