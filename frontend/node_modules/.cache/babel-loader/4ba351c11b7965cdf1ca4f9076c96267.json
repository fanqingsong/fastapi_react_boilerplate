{"ast":null,"code":"import * as React from 'react';\nimport { createContext, useRef } from 'react';\nexport var SideEffectContext = createContext({});\nexport var SideEffectContextProvider = function (_a) {\n  var children = _a.children,\n      value = _a.value;\n  return React.createElement(SideEffectContext.Provider, {\n    value: value\n  }, children);\n};\n/**\n * Get modifiers for a save() function, and the way to update them.\n *\n * Used in useCreateController and useEditController.\n *\n * @example\n *\n * const {\n *     onSuccessRef,\n *     setOnSuccess,\n *     onFailureRef,\n *     setOnFailure,\n *     transformRef,\n *     setTransform,\n * } = useSaveModifiers({ onSuccess, onFailure, transform });\n */\n\nexport var useSaveModifiers = function (_a) {\n  var onSuccess = _a.onSuccess,\n      onFailure = _a.onFailure,\n      transform = _a.transform;\n  var onSuccessRef = useRef(onSuccess);\n\n  var setOnSuccess = function (onSuccess) {\n    onSuccessRef.current = function (response) {\n      // reset onSuccess for next submission\n      onSuccessRef.current = undefined;\n      return onSuccess(response);\n    };\n  };\n\n  var onFailureRef = useRef(onFailure);\n\n  var setOnFailure = function (onFailure) {\n    onFailureRef.current = function (error) {\n      // reset onFailure for next submission\n      onFailureRef.current = undefined;\n      return onFailure(error);\n    };\n  };\n\n  var transformRef = useRef(transform);\n\n  var setTransform = function (transform) {\n    transformRef.current = function (data) {\n      // reset transform for next submission\n      transformRef.current = undefined;\n      return transform(data);\n    };\n  };\n\n  return {\n    onSuccessRef: onSuccessRef,\n    setOnSuccess: setOnSuccess,\n    onFailureRef: onFailureRef,\n    setOnFailure: setOnFailure,\n    transformRef: transformRef,\n    setTransform: setTransform\n  };\n};","map":{"version":3,"names":["React","createContext","useRef","SideEffectContext","SideEffectContextProvider","_a","children","value","createElement","Provider","useSaveModifiers","onSuccess","onFailure","transform","onSuccessRef","setOnSuccess","current","response","undefined","onFailureRef","setOnFailure","error","transformRef","setTransform","data"],"sources":["/app/node_modules/ra-core/esm/controller/saveModifiers.js"],"sourcesContent":["import * as React from 'react';\nimport { createContext, useRef } from 'react';\nexport var SideEffectContext = createContext({});\nexport var SideEffectContextProvider = function (_a) {\n    var children = _a.children, value = _a.value;\n    return (React.createElement(SideEffectContext.Provider, { value: value }, children));\n};\n/**\n * Get modifiers for a save() function, and the way to update them.\n *\n * Used in useCreateController and useEditController.\n *\n * @example\n *\n * const {\n *     onSuccessRef,\n *     setOnSuccess,\n *     onFailureRef,\n *     setOnFailure,\n *     transformRef,\n *     setTransform,\n * } = useSaveModifiers({ onSuccess, onFailure, transform });\n */\nexport var useSaveModifiers = function (_a) {\n    var onSuccess = _a.onSuccess, onFailure = _a.onFailure, transform = _a.transform;\n    var onSuccessRef = useRef(onSuccess);\n    var setOnSuccess = function (onSuccess) {\n        onSuccessRef.current = function (response) {\n            // reset onSuccess for next submission\n            onSuccessRef.current = undefined;\n            return onSuccess(response);\n        };\n    };\n    var onFailureRef = useRef(onFailure);\n    var setOnFailure = function (onFailure) {\n        onFailureRef.current = function (error) {\n            // reset onFailure for next submission\n            onFailureRef.current = undefined;\n            return onFailure(error);\n        };\n    };\n    var transformRef = useRef(transform);\n    var setTransform = function (transform) {\n        transformRef.current = function (data) {\n            // reset transform for next submission\n            transformRef.current = undefined;\n            return transform(data);\n        };\n    };\n    return {\n        onSuccessRef: onSuccessRef,\n        setOnSuccess: setOnSuccess,\n        onFailureRef: onFailureRef,\n        setOnFailure: setOnFailure,\n        transformRef: transformRef,\n        setTransform: setTransform,\n    };\n};\n"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,aAAT,EAAwBC,MAAxB,QAAsC,OAAtC;AACA,OAAO,IAAIC,iBAAiB,GAAGF,aAAa,CAAC,EAAD,CAArC;AACP,OAAO,IAAIG,yBAAyB,GAAG,UAAUC,EAAV,EAAc;EACjD,IAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;EAAA,IAA4BC,KAAK,GAAGF,EAAE,CAACE,KAAvC;EACA,OAAQP,KAAK,CAACQ,aAAN,CAAoBL,iBAAiB,CAACM,QAAtC,EAAgD;IAAEF,KAAK,EAAEA;EAAT,CAAhD,EAAkED,QAAlE,CAAR;AACH,CAHM;AAIP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAII,gBAAgB,GAAG,UAAUL,EAAV,EAAc;EACxC,IAAIM,SAAS,GAAGN,EAAE,CAACM,SAAnB;EAAA,IAA8BC,SAAS,GAAGP,EAAE,CAACO,SAA7C;EAAA,IAAwDC,SAAS,GAAGR,EAAE,CAACQ,SAAvE;EACA,IAAIC,YAAY,GAAGZ,MAAM,CAACS,SAAD,CAAzB;;EACA,IAAII,YAAY,GAAG,UAAUJ,SAAV,EAAqB;IACpCG,YAAY,CAACE,OAAb,GAAuB,UAAUC,QAAV,EAAoB;MACvC;MACAH,YAAY,CAACE,OAAb,GAAuBE,SAAvB;MACA,OAAOP,SAAS,CAACM,QAAD,CAAhB;IACH,CAJD;EAKH,CAND;;EAOA,IAAIE,YAAY,GAAGjB,MAAM,CAACU,SAAD,CAAzB;;EACA,IAAIQ,YAAY,GAAG,UAAUR,SAAV,EAAqB;IACpCO,YAAY,CAACH,OAAb,GAAuB,UAAUK,KAAV,EAAiB;MACpC;MACAF,YAAY,CAACH,OAAb,GAAuBE,SAAvB;MACA,OAAON,SAAS,CAACS,KAAD,CAAhB;IACH,CAJD;EAKH,CAND;;EAOA,IAAIC,YAAY,GAAGpB,MAAM,CAACW,SAAD,CAAzB;;EACA,IAAIU,YAAY,GAAG,UAAUV,SAAV,EAAqB;IACpCS,YAAY,CAACN,OAAb,GAAuB,UAAUQ,IAAV,EAAgB;MACnC;MACAF,YAAY,CAACN,OAAb,GAAuBE,SAAvB;MACA,OAAOL,SAAS,CAACW,IAAD,CAAhB;IACH,CAJD;EAKH,CAND;;EAOA,OAAO;IACHV,YAAY,EAAEA,YADX;IAEHC,YAAY,EAAEA,YAFX;IAGHI,YAAY,EAAEA,YAHX;IAIHC,YAAY,EAAEA,YAJX;IAKHE,YAAY,EAAEA,YALX;IAMHC,YAAY,EAAEA;EANX,CAAP;AAQH,CAlCM"},"metadata":{},"sourceType":"module"}