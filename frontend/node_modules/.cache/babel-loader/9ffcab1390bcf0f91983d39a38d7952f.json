{"ast":null,"code":"import { useCallback, isValidElement } from 'react';\nimport set from 'lodash/set';\nimport useChoices from './useChoices';\nimport { useTranslate } from '../i18n';\n/*\n * Returns helper functions for suggestions handling.\n *\n * @param allowDuplicates A boolean indicating whether a suggestion can be added several times\n * @param allowEmpty A boolean indicating whether an empty suggestion should be added\n * @param choices An array of available choices\n * @param emptyText The text to use for the empty suggestion. Defaults to an empty string\n * @param emptyValue The value to use for the empty suggestion. Defaults to `null`\n * @param limitChoicesToValue A boolean indicating whether the initial suggestions should be limited to the currently selected one(s)\n * @param matchSuggestion Optional unless `optionText` is a React element. Function which check whether a choice matches a filter. Must return a boolean.\n * @param optionText Either a string defining the property to use to get the choice text, a function or a React element\n * @param optionValue The property to use to get the choice value\n * @param selectedItem The currently selected item. May be an array of selected items\n * @param suggestionLimit The maximum number of suggestions returned, excluding the empty one if `allowEmpty` is `true`\n * @param translateChoice A boolean indicating whether to option text should be translated\n *\n * @returns An object with helper functions:\n * - getChoiceText: Returns the choice text or a React element\n * - getChoiceValue: Returns the choice value\n * - getSuggestions: A function taking a filter value (string) and returning the matching suggestions\n */\n\nvar useSuggestions = function (_a) {\n  var allowCreate = _a.allowCreate,\n      allowDuplicates = _a.allowDuplicates,\n      allowEmpty = _a.allowEmpty,\n      choices = _a.choices,\n      _b = _a.createText,\n      createText = _b === void 0 ? 'ra.action.create' : _b,\n      _c = _a.createValue,\n      createValue = _c === void 0 ? '@@create' : _c,\n      _d = _a.emptyText,\n      emptyText = _d === void 0 ? '' : _d,\n      _e = _a.emptyValue,\n      emptyValue = _e === void 0 ? null : _e,\n      limitChoicesToValue = _a.limitChoicesToValue,\n      matchSuggestion = _a.matchSuggestion,\n      optionText = _a.optionText,\n      optionValue = _a.optionValue,\n      selectedItem = _a.selectedItem,\n      _f = _a.suggestionLimit,\n      suggestionLimit = _f === void 0 ? 0 : _f,\n      translateChoice = _a.translateChoice;\n  var translate = useTranslate();\n\n  var _g = useChoices({\n    optionText: optionText,\n    optionValue: optionValue,\n    translateChoice: translateChoice\n  }),\n      getChoiceText = _g.getChoiceText,\n      getChoiceValue = _g.getChoiceValue; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  var getSuggestions = useCallback(getSuggestionsFactory({\n    allowCreate: allowCreate,\n    allowDuplicates: allowDuplicates,\n    allowEmpty: allowEmpty,\n    choices: choices,\n    createText: createText,\n    createValue: createValue,\n    emptyText: translate(emptyText, {\n      _: emptyText\n    }),\n    emptyValue: emptyValue,\n    getChoiceText: getChoiceText,\n    getChoiceValue: getChoiceValue,\n    limitChoicesToValue: limitChoicesToValue,\n    matchSuggestion: matchSuggestion,\n    optionText: optionText,\n    optionValue: optionValue,\n    selectedItem: selectedItem,\n    suggestionLimit: suggestionLimit\n  }), [allowCreate, allowDuplicates, allowEmpty, choices, createText, createValue, emptyText, emptyValue, getChoiceText, getChoiceValue, limitChoicesToValue, matchSuggestion, optionText, optionValue, selectedItem, suggestionLimit, translate]);\n  return {\n    getChoiceText: getChoiceText,\n    getChoiceValue: getChoiceValue,\n    getSuggestions: getSuggestions\n  };\n};\n\nexport default useSuggestions;\n\nvar escapeRegExp = function (value) {\n  return value ? value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') : '';\n}; // $& means the whole matched string\n\n/**\n * Default matcher implementation which check whether the suggestion text matches the filter.\n */\n\n\nvar defaultMatchSuggestion = function (getChoiceText) {\n  return function (filter, suggestion, exact) {\n    if (exact === void 0) {\n      exact = false;\n    }\n\n    var suggestionText = getChoiceText(suggestion);\n    var isReactElement = isValidElement(suggestionText);\n    var regex = escapeRegExp(filter);\n    return isReactElement ? false : suggestionText && suggestionText.match( // We must escape any RegExp reserved characters to avoid errors\n    // For example, the filter might contain * which must be escaped as \\*\n    new RegExp(exact ? \"^\" + regex + \"$\" : regex, 'i'));\n  };\n};\n/**\n * Get the suggestions to display after applying a fuzzy search on the available choices\n *\n * @example\n *\n * getSuggestions({\n *   choices: [{ id: 1, name: 'admin' }, { id: 2, name: 'publisher' }],\n *   optionText: 'name',\n *   optionValue: 'id',\n *   getSuggestionText: choice => choice[optionText],\n * })('pub')\n *\n * // Will return [{ id: 2, name: 'publisher' }]\n * getSuggestions({\n *   choices: [{ id: 1, name: 'admin' }, { id: 2, name: 'publisher' }],\n *   optionText: 'name',\n *   optionValue: 'id',\n *   getSuggestionText: choice => choice[optionText],\n * })('pub')\n *\n * // Will return [{ id: 2, name: 'publisher' }]\n */\n\n\nexport var getSuggestionsFactory = function (_a) {\n  var _b = _a.allowCreate,\n      allowCreate = _b === void 0 ? false : _b,\n      _c = _a.allowDuplicates,\n      allowDuplicates = _c === void 0 ? false : _c,\n      _d = _a.allowEmpty,\n      allowEmpty = _d === void 0 ? false : _d,\n      _e = _a.choices,\n      choices = _e === void 0 ? [] : _e,\n      _f = _a.createText,\n      createText = _f === void 0 ? 'ra.action.create' : _f,\n      _g = _a.createValue,\n      createValue = _g === void 0 ? '@@create' : _g,\n      _h = _a.emptyText,\n      emptyText = _h === void 0 ? '' : _h,\n      _j = _a.emptyValue,\n      emptyValue = _j === void 0 ? null : _j,\n      _k = _a.optionText,\n      optionText = _k === void 0 ? 'name' : _k,\n      _l = _a.optionValue,\n      optionValue = _l === void 0 ? 'id' : _l,\n      getChoiceText = _a.getChoiceText,\n      getChoiceValue = _a.getChoiceValue,\n      _m = _a.limitChoicesToValue,\n      limitChoicesToValue = _m === void 0 ? false : _m,\n      _o = _a.matchSuggestion,\n      matchSuggestion = _o === void 0 ? defaultMatchSuggestion(getChoiceText) : _o,\n      selectedItem = _a.selectedItem,\n      _p = _a.suggestionLimit,\n      suggestionLimit = _p === void 0 ? 0 : _p;\n  return function (filter) {\n    var suggestions = []; // if an item is selected and matches the filter\n\n    if (selectedItem && !Array.isArray(selectedItem) && matchSuggestion(filter, selectedItem)) {\n      if (limitChoicesToValue) {\n        // display only the selected item\n        suggestions = choices.filter(function (choice) {\n          return getChoiceValue(choice) === getChoiceValue(selectedItem);\n        });\n      } else if (!allowDuplicates) {\n        // ignore the filter to show more choices\n        suggestions = removeAlreadySelectedSuggestions(choices, selectedItem, getChoiceValue);\n      } else {\n        suggestions = choices;\n      }\n    } else {\n      suggestions = choices.filter(function (choice) {\n        return matchSuggestion(filter, choice);\n      });\n\n      if (!allowDuplicates) {\n        suggestions = removeAlreadySelectedSuggestions(suggestions, selectedItem, getChoiceValue);\n      }\n    }\n\n    suggestions = limitSuggestions(suggestions, suggestionLimit);\n    var hasExactMatch = suggestions.some(function (suggestion) {\n      return matchSuggestion(filter, suggestion, true);\n    });\n\n    if (allowCreate) {\n      var filterIsSelectedItem = // If the selectedItem is an array (for example AutocompleteArrayInput)\n      // we shouldn't try to match\n      !!selectedItem && !Array.isArray(selectedItem) ? matchSuggestion(filter, selectedItem, true) : false;\n\n      if (!hasExactMatch && !filterIsSelectedItem) {\n        suggestions.push(getSuggestion({\n          optionText: optionText,\n          optionValue: optionValue,\n          text: createText,\n          value: createValue\n        }));\n      }\n    }\n\n    if (allowEmpty) {\n      suggestions.unshift(getSuggestion({\n        optionText: optionText,\n        optionValue: optionValue,\n        text: emptyText,\n        value: emptyValue\n      }));\n    }\n\n    return suggestions;\n  };\n};\n/**\n * @example\n *\n * removeAlreadySelectedSuggestions(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n *  [{ id: 1, name: 'foo'}]\n * );\n *\n * // Will return [{ id: 2, name: 'bar' }]\n *\n * @param suggestions List of suggestions\n * @param selectedItems List of selection\n * @param getChoiceValue Converter function from suggestion to value\n */\n\nvar removeAlreadySelectedSuggestions = function (suggestions, selectedItems, getChoiceValue) {\n  if (!selectedItems) {\n    return suggestions;\n  }\n\n  var selectedValues = Array.isArray(selectedItems) ? selectedItems.map(getChoiceValue) : [getChoiceValue(selectedItems)];\n  return suggestions.filter(function (suggestion) {\n    return !selectedValues.includes(getChoiceValue(suggestion));\n  });\n};\n/**\n * @example\n *\n * limitSuggestions(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n *  1\n * );\n *\n * // Will return [{ id: 1, name: 'foo' }]\n *\n * @param suggestions List of suggestions\n * @param limit\n */\n\n\nvar limitSuggestions = function (suggestions, limit) {\n  if (limit === void 0) {\n    limit = 0;\n  }\n\n  return Number.isInteger(limit) && limit > 0 ? suggestions.slice(0, limit) : suggestions;\n};\n/**\n * addSuggestion(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n * );\n *\n * // Will return [{ id: null, name: '' }, { id: 1, name: 'foo' }, , { id: 2, name: 'bar' }]\n *\n * @param suggestions List of suggestions\n * @param options\n * @param options.optionText\n */\n\n\nvar getSuggestion = function (_a) {\n  var _b = _a.optionText,\n      optionText = _b === void 0 ? 'name' : _b,\n      _c = _a.optionValue,\n      optionValue = _c === void 0 ? 'id' : _c,\n      _d = _a.text,\n      text = _d === void 0 ? '' : _d,\n      _e = _a.value,\n      value = _e === void 0 ? null : _e;\n  var suggestion = {};\n  set(suggestion, optionValue, value);\n\n  if (typeof optionText === 'string') {\n    set(suggestion, optionText, text);\n  }\n\n  return suggestion;\n};","map":{"version":3,"names":["useCallback","isValidElement","set","useChoices","useTranslate","useSuggestions","_a","allowCreate","allowDuplicates","allowEmpty","choices","_b","createText","_c","createValue","_d","emptyText","_e","emptyValue","limitChoicesToValue","matchSuggestion","optionText","optionValue","selectedItem","_f","suggestionLimit","translateChoice","translate","_g","getChoiceText","getChoiceValue","getSuggestions","getSuggestionsFactory","_","escapeRegExp","value","replace","defaultMatchSuggestion","filter","suggestion","exact","suggestionText","isReactElement","regex","match","RegExp","_h","_j","_k","_l","_m","_o","_p","suggestions","Array","isArray","choice","removeAlreadySelectedSuggestions","limitSuggestions","hasExactMatch","some","filterIsSelectedItem","push","getSuggestion","text","unshift","selectedItems","selectedValues","map","includes","limit","Number","isInteger","slice"],"sources":["/app/node_modules/ra-core/esm/form/useSuggestions.js"],"sourcesContent":["import { useCallback, isValidElement } from 'react';\nimport set from 'lodash/set';\nimport useChoices from './useChoices';\nimport { useTranslate } from '../i18n';\n/*\n * Returns helper functions for suggestions handling.\n *\n * @param allowDuplicates A boolean indicating whether a suggestion can be added several times\n * @param allowEmpty A boolean indicating whether an empty suggestion should be added\n * @param choices An array of available choices\n * @param emptyText The text to use for the empty suggestion. Defaults to an empty string\n * @param emptyValue The value to use for the empty suggestion. Defaults to `null`\n * @param limitChoicesToValue A boolean indicating whether the initial suggestions should be limited to the currently selected one(s)\n * @param matchSuggestion Optional unless `optionText` is a React element. Function which check whether a choice matches a filter. Must return a boolean.\n * @param optionText Either a string defining the property to use to get the choice text, a function or a React element\n * @param optionValue The property to use to get the choice value\n * @param selectedItem The currently selected item. May be an array of selected items\n * @param suggestionLimit The maximum number of suggestions returned, excluding the empty one if `allowEmpty` is `true`\n * @param translateChoice A boolean indicating whether to option text should be translated\n *\n * @returns An object with helper functions:\n * - getChoiceText: Returns the choice text or a React element\n * - getChoiceValue: Returns the choice value\n * - getSuggestions: A function taking a filter value (string) and returning the matching suggestions\n */\nvar useSuggestions = function (_a) {\n    var allowCreate = _a.allowCreate, allowDuplicates = _a.allowDuplicates, allowEmpty = _a.allowEmpty, choices = _a.choices, _b = _a.createText, createText = _b === void 0 ? 'ra.action.create' : _b, _c = _a.createValue, createValue = _c === void 0 ? '@@create' : _c, _d = _a.emptyText, emptyText = _d === void 0 ? '' : _d, _e = _a.emptyValue, emptyValue = _e === void 0 ? null : _e, limitChoicesToValue = _a.limitChoicesToValue, matchSuggestion = _a.matchSuggestion, optionText = _a.optionText, optionValue = _a.optionValue, selectedItem = _a.selectedItem, _f = _a.suggestionLimit, suggestionLimit = _f === void 0 ? 0 : _f, translateChoice = _a.translateChoice;\n    var translate = useTranslate();\n    var _g = useChoices({\n        optionText: optionText,\n        optionValue: optionValue,\n        translateChoice: translateChoice,\n    }), getChoiceText = _g.getChoiceText, getChoiceValue = _g.getChoiceValue;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    var getSuggestions = useCallback(getSuggestionsFactory({\n        allowCreate: allowCreate,\n        allowDuplicates: allowDuplicates,\n        allowEmpty: allowEmpty,\n        choices: choices,\n        createText: createText,\n        createValue: createValue,\n        emptyText: translate(emptyText, { _: emptyText }),\n        emptyValue: emptyValue,\n        getChoiceText: getChoiceText,\n        getChoiceValue: getChoiceValue,\n        limitChoicesToValue: limitChoicesToValue,\n        matchSuggestion: matchSuggestion,\n        optionText: optionText,\n        optionValue: optionValue,\n        selectedItem: selectedItem,\n        suggestionLimit: suggestionLimit,\n    }), [\n        allowCreate,\n        allowDuplicates,\n        allowEmpty,\n        choices,\n        createText,\n        createValue,\n        emptyText,\n        emptyValue,\n        getChoiceText,\n        getChoiceValue,\n        limitChoicesToValue,\n        matchSuggestion,\n        optionText,\n        optionValue,\n        selectedItem,\n        suggestionLimit,\n        translate,\n    ]);\n    return {\n        getChoiceText: getChoiceText,\n        getChoiceValue: getChoiceValue,\n        getSuggestions: getSuggestions,\n    };\n};\nexport default useSuggestions;\nvar escapeRegExp = function (value) {\n    return value ? value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') : '';\n}; // $& means the whole matched string\n/**\n * Default matcher implementation which check whether the suggestion text matches the filter.\n */\nvar defaultMatchSuggestion = function (getChoiceText) { return function (filter, suggestion, exact) {\n    if (exact === void 0) { exact = false; }\n    var suggestionText = getChoiceText(suggestion);\n    var isReactElement = isValidElement(suggestionText);\n    var regex = escapeRegExp(filter);\n    return isReactElement\n        ? false\n        : suggestionText &&\n            suggestionText.match(\n            // We must escape any RegExp reserved characters to avoid errors\n            // For example, the filter might contain * which must be escaped as \\*\n            new RegExp(exact ? \"^\" + regex + \"$\" : regex, 'i'));\n}; };\n/**\n * Get the suggestions to display after applying a fuzzy search on the available choices\n *\n * @example\n *\n * getSuggestions({\n *   choices: [{ id: 1, name: 'admin' }, { id: 2, name: 'publisher' }],\n *   optionText: 'name',\n *   optionValue: 'id',\n *   getSuggestionText: choice => choice[optionText],\n * })('pub')\n *\n * // Will return [{ id: 2, name: 'publisher' }]\n * getSuggestions({\n *   choices: [{ id: 1, name: 'admin' }, { id: 2, name: 'publisher' }],\n *   optionText: 'name',\n *   optionValue: 'id',\n *   getSuggestionText: choice => choice[optionText],\n * })('pub')\n *\n * // Will return [{ id: 2, name: 'publisher' }]\n */\nexport var getSuggestionsFactory = function (_a) {\n    var _b = _a.allowCreate, allowCreate = _b === void 0 ? false : _b, _c = _a.allowDuplicates, allowDuplicates = _c === void 0 ? false : _c, _d = _a.allowEmpty, allowEmpty = _d === void 0 ? false : _d, _e = _a.choices, choices = _e === void 0 ? [] : _e, _f = _a.createText, createText = _f === void 0 ? 'ra.action.create' : _f, _g = _a.createValue, createValue = _g === void 0 ? '@@create' : _g, _h = _a.emptyText, emptyText = _h === void 0 ? '' : _h, _j = _a.emptyValue, emptyValue = _j === void 0 ? null : _j, _k = _a.optionText, optionText = _k === void 0 ? 'name' : _k, _l = _a.optionValue, optionValue = _l === void 0 ? 'id' : _l, getChoiceText = _a.getChoiceText, getChoiceValue = _a.getChoiceValue, _m = _a.limitChoicesToValue, limitChoicesToValue = _m === void 0 ? false : _m, _o = _a.matchSuggestion, matchSuggestion = _o === void 0 ? defaultMatchSuggestion(getChoiceText) : _o, selectedItem = _a.selectedItem, _p = _a.suggestionLimit, suggestionLimit = _p === void 0 ? 0 : _p;\n    return function (filter) {\n        var suggestions = [];\n        // if an item is selected and matches the filter\n        if (selectedItem &&\n            !Array.isArray(selectedItem) &&\n            matchSuggestion(filter, selectedItem)) {\n            if (limitChoicesToValue) {\n                // display only the selected item\n                suggestions = choices.filter(function (choice) {\n                    return getChoiceValue(choice) === getChoiceValue(selectedItem);\n                });\n            }\n            else if (!allowDuplicates) {\n                // ignore the filter to show more choices\n                suggestions = removeAlreadySelectedSuggestions(choices, selectedItem, getChoiceValue);\n            }\n            else {\n                suggestions = choices;\n            }\n        }\n        else {\n            suggestions = choices.filter(function (choice) { return matchSuggestion(filter, choice); });\n            if (!allowDuplicates) {\n                suggestions = removeAlreadySelectedSuggestions(suggestions, selectedItem, getChoiceValue);\n            }\n        }\n        suggestions = limitSuggestions(suggestions, suggestionLimit);\n        var hasExactMatch = suggestions.some(function (suggestion) {\n            return matchSuggestion(filter, suggestion, true);\n        });\n        if (allowCreate) {\n            var filterIsSelectedItem = \n            // If the selectedItem is an array (for example AutocompleteArrayInput)\n            // we shouldn't try to match\n            !!selectedItem && !Array.isArray(selectedItem)\n                ? matchSuggestion(filter, selectedItem, true)\n                : false;\n            if (!hasExactMatch && !filterIsSelectedItem) {\n                suggestions.push(getSuggestion({\n                    optionText: optionText,\n                    optionValue: optionValue,\n                    text: createText,\n                    value: createValue,\n                }));\n            }\n        }\n        if (allowEmpty) {\n            suggestions.unshift(getSuggestion({\n                optionText: optionText,\n                optionValue: optionValue,\n                text: emptyText,\n                value: emptyValue,\n            }));\n        }\n        return suggestions;\n    };\n};\n/**\n * @example\n *\n * removeAlreadySelectedSuggestions(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n *  [{ id: 1, name: 'foo'}]\n * );\n *\n * // Will return [{ id: 2, name: 'bar' }]\n *\n * @param suggestions List of suggestions\n * @param selectedItems List of selection\n * @param getChoiceValue Converter function from suggestion to value\n */\nvar removeAlreadySelectedSuggestions = function (suggestions, selectedItems, getChoiceValue) {\n    if (!selectedItems) {\n        return suggestions;\n    }\n    var selectedValues = Array.isArray(selectedItems)\n        ? selectedItems.map(getChoiceValue)\n        : [getChoiceValue(selectedItems)];\n    return suggestions.filter(function (suggestion) { return !selectedValues.includes(getChoiceValue(suggestion)); });\n};\n/**\n * @example\n *\n * limitSuggestions(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n *  1\n * );\n *\n * // Will return [{ id: 1, name: 'foo' }]\n *\n * @param suggestions List of suggestions\n * @param limit\n */\nvar limitSuggestions = function (suggestions, limit) {\n    if (limit === void 0) { limit = 0; }\n    return Number.isInteger(limit) && limit > 0\n        ? suggestions.slice(0, limit)\n        : suggestions;\n};\n/**\n * addSuggestion(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n * );\n *\n * // Will return [{ id: null, name: '' }, { id: 1, name: 'foo' }, , { id: 2, name: 'bar' }]\n *\n * @param suggestions List of suggestions\n * @param options\n * @param options.optionText\n */\nvar getSuggestion = function (_a) {\n    var _b = _a.optionText, optionText = _b === void 0 ? 'name' : _b, _c = _a.optionValue, optionValue = _c === void 0 ? 'id' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.value, value = _e === void 0 ? null : _e;\n    var suggestion = {};\n    set(suggestion, optionValue, value);\n    if (typeof optionText === 'string') {\n        set(suggestion, optionText, text);\n    }\n    return suggestion;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}