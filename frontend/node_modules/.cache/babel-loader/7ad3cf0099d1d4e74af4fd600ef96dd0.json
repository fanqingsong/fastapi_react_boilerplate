{"ast":null,"code":"var __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport { useCallback, useEffect, useRef } from 'react';\nimport { useSafeSetState } from '../util';\nvar defaultSelection = [];\n/**\n * Hooks to provide selection state.\n *\n * The names of the return values match the ListContext interface\n *\n * @example\n *\n * const { selectedIds, onSelect, onToggleItem, onUnselectItems } = useSelectionState();\n *\n */\n\nvar useSelectionState = function (initialSelection) {\n  if (initialSelection === void 0) {\n    initialSelection = defaultSelection;\n  }\n\n  var _a = useSafeSetState(initialSelection),\n      selectedIds = _a[0],\n      setSelectedIds = _a[1];\n\n  var isFirstRender = useRef(true);\n  useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    setSelectedIds(initialSelection);\n  }, [initialSelection, setSelectedIds]);\n  var onSelect = useCallback(function (newIds) {\n    setSelectedIds(newIds);\n  }, [setSelectedIds]);\n  var onToggleItem = useCallback(function (id) {\n    setSelectedIds(function (previousState) {\n      var index = previousState.indexOf(id);\n\n      if (index > -1) {\n        return __spreadArray(__spreadArray([], previousState.slice(0, index), true), previousState.slice(index + 1), true);\n      } else {\n        return __spreadArray(__spreadArray([], previousState, true), [id], false);\n      }\n    });\n  }, [setSelectedIds]);\n  var onUnselectItems = useCallback(function () {\n    setSelectedIds([]);\n  }, [setSelectedIds]);\n  return {\n    selectedIds: selectedIds,\n    onSelect: onSelect,\n    onToggleItem: onToggleItem,\n    onUnselectItems: onUnselectItems\n  };\n};\n\nexport default useSelectionState;","map":{"version":3,"names":["__spreadArray","to","from","pack","arguments","length","i","l","ar","Array","prototype","slice","call","concat","useCallback","useEffect","useRef","useSafeSetState","defaultSelection","useSelectionState","initialSelection","_a","selectedIds","setSelectedIds","isFirstRender","current","onSelect","newIds","onToggleItem","id","previousState","index","indexOf","onUnselectItems"],"sources":["/app/node_modules/ra-core/esm/controller/useSelectionState.js"],"sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useCallback, useEffect, useRef } from 'react';\nimport { useSafeSetState } from '../util';\nvar defaultSelection = [];\n/**\n * Hooks to provide selection state.\n *\n * The names of the return values match the ListContext interface\n *\n * @example\n *\n * const { selectedIds, onSelect, onToggleItem, onUnselectItems } = useSelectionState();\n *\n */\nvar useSelectionState = function (initialSelection) {\n    if (initialSelection === void 0) { initialSelection = defaultSelection; }\n    var _a = useSafeSetState(initialSelection), selectedIds = _a[0], setSelectedIds = _a[1];\n    var isFirstRender = useRef(true);\n    useEffect(function () {\n        if (isFirstRender.current) {\n            isFirstRender.current = false;\n            return;\n        }\n        setSelectedIds(initialSelection);\n    }, [initialSelection, setSelectedIds]);\n    var onSelect = useCallback(function (newIds) {\n        setSelectedIds(newIds);\n    }, [setSelectedIds]);\n    var onToggleItem = useCallback(function (id) {\n        setSelectedIds(function (previousState) {\n            var index = previousState.indexOf(id);\n            if (index > -1) {\n                return __spreadArray(__spreadArray([], previousState.slice(0, index), true), previousState.slice(index + 1), true);\n            }\n            else {\n                return __spreadArray(__spreadArray([], previousState, true), [id], false);\n            }\n        });\n    }, [setSelectedIds]);\n    var onUnselectItems = useCallback(function () {\n        setSelectedIds([]);\n    }, [setSelectedIds]);\n    return {\n        selectedIds: selectedIds,\n        onSelect: onSelect,\n        onToggleItem: onToggleItem,\n        onUnselectItems: onUnselectItems,\n    };\n};\nexport default useSelectionState;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}