{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport useDataProvider from './useDataProvider';\nimport { useMemo } from 'react';\nimport useDeclarativeSideEffects from './useDeclarativeSideEffects';\nimport { getDataProviderCallArguments } from './getDataProviderCallArguments';\n/**\n * This version of the useDataProvider hook ensure Query and Mutation components are still usable\n * with side effects declared as objects.\n *\n * @deprecated This is for backward compatibility only and will be removed in next major version.\n */\n\nvar useDataProviderWithDeclarativeSideEffects = function () {\n  var dataProvider = useDataProvider();\n  var getSideEffects = useDeclarativeSideEffects(); // @ts-ignore\n\n  var dataProviderProxy = useMemo(function () {\n    return new Proxy(dataProvider, {\n      get: function (target, name) {\n        if (typeof name === 'symbol') {\n          return;\n        }\n\n        return function () {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var _a = getDataProviderCallArguments(args),\n              resource = _a.resource,\n              payload = _a.payload,\n              allArguments = _a.allArguments,\n              options = _a.options;\n\n          var onSuccess;\n          var onFailure;\n          var finalOptions = options;\n          var finalAllArguments = allArguments;\n\n          if (options && Object.keys(options).some(function (key) {\n            return ['onSuccess', 'onFailure'].includes(key);\n          })) {\n            var sideEffect = getSideEffects(resource, options);\n\n            var ignoreOnSuccess = options.onSuccess,\n                // Used to extract options without onSuccess\n            ignoreOnFailure = options.onFailure,\n                // Used to extract options without onFailure\n            otherOptions = __rest(options, [\"onSuccess\", \"onFailure\"]);\n\n            onSuccess = sideEffect.onSuccess;\n            onFailure = sideEffect.onFailure;\n            finalOptions = otherOptions;\n            finalAllArguments = __spreadArray([], args, true).slice(0, args.length - 1);\n          }\n\n          try {\n            return target[name.toString()].apply(target, typeof resource === 'string' ? [resource, payload, __assign(__assign({}, finalOptions), {\n              onSuccess: onSuccess,\n              onFailure: onFailure\n            })] : finalAllArguments);\n          } catch (e) {\n            // turn synchronous exceptions (e.g. in parameter preparation)\n            // into async ones, otherwise they'll be lost\n            return Promise.reject(e);\n          }\n        };\n      }\n    });\n  }, [dataProvider, getSideEffects]);\n  return dataProviderProxy;\n};\n\nexport default useDataProviderWithDeclarativeSideEffects;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","useDataProvider","useMemo","useDeclarativeSideEffects","getDataProviderCallArguments","useDataProviderWithDeclarativeSideEffects","dataProvider","getSideEffects","dataProviderProxy","Proxy","get","target","name","args","_i","_a","resource","payload","allArguments","options","onSuccess","onFailure","finalOptions","finalAllArguments","keys","some","key","includes","sideEffect","ignoreOnSuccess","ignoreOnFailure","otherOptions","toString","Promise","reject"],"sources":["/app/node_modules/ra-core/esm/dataProvider/useDataProviderWithDeclarativeSideEffects.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport useDataProvider from './useDataProvider';\nimport { useMemo } from 'react';\nimport useDeclarativeSideEffects from './useDeclarativeSideEffects';\nimport { getDataProviderCallArguments } from './getDataProviderCallArguments';\n/**\n * This version of the useDataProvider hook ensure Query and Mutation components are still usable\n * with side effects declared as objects.\n *\n * @deprecated This is for backward compatibility only and will be removed in next major version.\n */\nvar useDataProviderWithDeclarativeSideEffects = function () {\n    var dataProvider = useDataProvider();\n    var getSideEffects = useDeclarativeSideEffects();\n    // @ts-ignore\n    var dataProviderProxy = useMemo(function () {\n        return new Proxy(dataProvider, {\n            get: function (target, name) {\n                if (typeof name === 'symbol') {\n                    return;\n                }\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a = getDataProviderCallArguments(args), resource = _a.resource, payload = _a.payload, allArguments = _a.allArguments, options = _a.options;\n                    var onSuccess;\n                    var onFailure;\n                    var finalOptions = options;\n                    var finalAllArguments = allArguments;\n                    if (options &&\n                        Object.keys(options).some(function (key) {\n                            return ['onSuccess', 'onFailure'].includes(key);\n                        })) {\n                        var sideEffect = getSideEffects(resource, options);\n                        var ignoreOnSuccess = options.onSuccess, // Used to extract options without onSuccess\n                        ignoreOnFailure = options.onFailure, // Used to extract options without onFailure\n                        otherOptions = __rest(options, [\"onSuccess\", \"onFailure\"]);\n                        onSuccess = sideEffect.onSuccess;\n                        onFailure = sideEffect.onFailure;\n                        finalOptions = otherOptions;\n                        finalAllArguments = __spreadArray([], args, true).slice(0, args.length - 1);\n                    }\n                    try {\n                        return target[name.toString()].apply(target, typeof resource === 'string'\n                            ? [\n                                resource,\n                                payload,\n                                __assign(__assign({}, finalOptions), { onSuccess: onSuccess, onFailure: onFailure }),\n                            ]\n                            : finalAllArguments);\n                    }\n                    catch (e) {\n                        // turn synchronous exceptions (e.g. in parameter preparation)\n                        // into async ones, otherwise they'll be lost\n                        return Promise.reject(e);\n                    }\n                };\n            },\n        });\n    }, [dataProvider, getSideEffects]);\n    return dataProviderProxy;\n};\nexport default useDataProviderWithDeclarativeSideEffects;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}