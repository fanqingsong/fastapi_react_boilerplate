{"ast":null,"code":"import { useNotify, useRedirect, useRefresh, useUnselectAll } from '../sideEffect';\nimport { useMemo } from 'react';\nvar defaultSideEffects = {\n  onSuccess: undefined,\n  onFailure: undefined\n};\n\nvar useDeclarativeSideEffects = function () {\n  var notify = useNotify();\n  var redirect = useRedirect();\n  var refresh = useRefresh();\n  var unselectAll = useUnselectAll();\n  return useMemo(function () {\n    return function (resource, _a) {\n      var _b = _a === void 0 ? defaultSideEffects : _a,\n          onSuccess = _b.onSuccess,\n          onFailure = _b.onFailure;\n\n      var convertToFunctionSideEffect = function (resource, sideEffects) {\n        if (!sideEffects || typeof sideEffects === 'function') {\n          return sideEffects;\n        }\n\n        if (Object.keys(sideEffects).length === 0) {\n          return undefined;\n        }\n\n        var notification = sideEffects.notification,\n            redirectTo = sideEffects.redirectTo,\n            needRefresh = sideEffects.refresh,\n            needUnselectAll = sideEffects.unselectAll;\n        return function () {\n          if (notification) {\n            notify(notification.body, {\n              type: notification.level,\n              messageArgs: notification.messageArgs\n            });\n          }\n\n          if (redirectTo) {\n            redirect(redirectTo);\n          }\n\n          if (needRefresh) {\n            refresh();\n          }\n\n          if (needUnselectAll) {\n            unselectAll(resource);\n          }\n        };\n      };\n\n      return {\n        onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n        onFailure: convertToFunctionSideEffect(resource, onFailure)\n      };\n    };\n  }, [notify, redirect, refresh, unselectAll]);\n};\n\nexport default useDeclarativeSideEffects;","map":{"version":3,"names":["useNotify","useRedirect","useRefresh","useUnselectAll","useMemo","defaultSideEffects","onSuccess","undefined","onFailure","useDeclarativeSideEffects","notify","redirect","refresh","unselectAll","resource","_a","_b","convertToFunctionSideEffect","sideEffects","Object","keys","length","notification","redirectTo","needRefresh","needUnselectAll","body","type","level","messageArgs"],"sources":["/home/lightsong/workspace/freact/frontend/node_modules/ra-core/esm/dataProvider/useDeclarativeSideEffects.js"],"sourcesContent":["import { useNotify, useRedirect, useRefresh, useUnselectAll, } from '../sideEffect';\nimport { useMemo } from 'react';\nvar defaultSideEffects = {\n    onSuccess: undefined,\n    onFailure: undefined,\n};\nvar useDeclarativeSideEffects = function () {\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var unselectAll = useUnselectAll();\n    return useMemo(function () { return function (resource, _a) {\n        var _b = _a === void 0 ? defaultSideEffects : _a, onSuccess = _b.onSuccess, onFailure = _b.onFailure;\n        var convertToFunctionSideEffect = function (resource, sideEffects) {\n            if (!sideEffects || typeof sideEffects === 'function') {\n                return sideEffects;\n            }\n            if (Object.keys(sideEffects).length === 0) {\n                return undefined;\n            }\n            var notification = sideEffects.notification, redirectTo = sideEffects.redirectTo, needRefresh = sideEffects.refresh, needUnselectAll = sideEffects.unselectAll;\n            return function () {\n                if (notification) {\n                    notify(notification.body, {\n                        type: notification.level,\n                        messageArgs: notification.messageArgs,\n                    });\n                }\n                if (redirectTo) {\n                    redirect(redirectTo);\n                }\n                if (needRefresh) {\n                    refresh();\n                }\n                if (needUnselectAll) {\n                    unselectAll(resource);\n                }\n            };\n        };\n        return {\n            onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n            onFailure: convertToFunctionSideEffect(resource, onFailure),\n        };\n    }; }, [notify, redirect, refresh, unselectAll]);\n};\nexport default useDeclarativeSideEffects;\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,WAApB,EAAiCC,UAAjC,EAA6CC,cAA7C,QAAoE,eAApE;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,IAAIC,kBAAkB,GAAG;EACrBC,SAAS,EAAEC,SADU;EAErBC,SAAS,EAAED;AAFU,CAAzB;;AAIA,IAAIE,yBAAyB,GAAG,YAAY;EACxC,IAAIC,MAAM,GAAGV,SAAS,EAAtB;EACA,IAAIW,QAAQ,GAAGV,WAAW,EAA1B;EACA,IAAIW,OAAO,GAAGV,UAAU,EAAxB;EACA,IAAIW,WAAW,GAAGV,cAAc,EAAhC;EACA,OAAOC,OAAO,CAAC,YAAY;IAAE,OAAO,UAAUU,QAAV,EAAoBC,EAApB,EAAwB;MACxD,IAAIC,EAAE,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgBV,kBAAhB,GAAqCU,EAA9C;MAAA,IAAkDT,SAAS,GAAGU,EAAE,CAACV,SAAjE;MAAA,IAA4EE,SAAS,GAAGQ,EAAE,CAACR,SAA3F;;MACA,IAAIS,2BAA2B,GAAG,UAAUH,QAAV,EAAoBI,WAApB,EAAiC;QAC/D,IAAI,CAACA,WAAD,IAAgB,OAAOA,WAAP,KAAuB,UAA3C,EAAuD;UACnD,OAAOA,WAAP;QACH;;QACD,IAAIC,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,MAAzB,KAAoC,CAAxC,EAA2C;UACvC,OAAOd,SAAP;QACH;;QACD,IAAIe,YAAY,GAAGJ,WAAW,CAACI,YAA/B;QAAA,IAA6CC,UAAU,GAAGL,WAAW,CAACK,UAAtE;QAAA,IAAkFC,WAAW,GAAGN,WAAW,CAACN,OAA5G;QAAA,IAAqHa,eAAe,GAAGP,WAAW,CAACL,WAAnJ;QACA,OAAO,YAAY;UACf,IAAIS,YAAJ,EAAkB;YACdZ,MAAM,CAACY,YAAY,CAACI,IAAd,EAAoB;cACtBC,IAAI,EAAEL,YAAY,CAACM,KADG;cAEtBC,WAAW,EAAEP,YAAY,CAACO;YAFJ,CAApB,CAAN;UAIH;;UACD,IAAIN,UAAJ,EAAgB;YACZZ,QAAQ,CAACY,UAAD,CAAR;UACH;;UACD,IAAIC,WAAJ,EAAiB;YACbZ,OAAO;UACV;;UACD,IAAIa,eAAJ,EAAqB;YACjBZ,WAAW,CAACC,QAAD,CAAX;UACH;QACJ,CAhBD;MAiBH,CAzBD;;MA0BA,OAAO;QACHR,SAAS,EAAEW,2BAA2B,CAACH,QAAD,EAAWR,SAAX,CADnC;QAEHE,SAAS,EAAES,2BAA2B,CAACH,QAAD,EAAWN,SAAX;MAFnC,CAAP;IAIH,CAhC4B;EAgCzB,CAhCU,EAgCR,CAACE,MAAD,EAASC,QAAT,EAAmBC,OAAnB,EAA4BC,WAA5B,CAhCQ,CAAd;AAiCH,CAtCD;;AAuCA,eAAeJ,yBAAf"},"metadata":{},"sourceType":"module"}