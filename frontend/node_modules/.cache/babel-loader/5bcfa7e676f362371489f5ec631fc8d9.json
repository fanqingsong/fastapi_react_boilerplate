{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field, Form } from 'react-final-form';\nimport { Button, CardActions, CircularProgress, TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslate, useLogin, useNotify, useSafeSetState } from 'ra-core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    form: {\n      padding: '0 1em 1em 1em'\n    },\n    input: {\n      marginTop: '1em'\n    },\n    button: {\n      width: '100%'\n    },\n    icon: {\n      marginRight: theme.spacing(1)\n    }\n  };\n}, {\n  name: 'RaLoginForm'\n});\n\nvar Input = function (_a) {\n  var _b = _a.meta,\n      touched = _b.touched,\n      error = _b.error,\n      // eslint-disable-line react/prop-types\n  inputProps = _a.input,\n      // eslint-disable-line react/prop-types\n  props = __rest(_a, [\"meta\", \"input\"]);\n\n  return React.createElement(TextField, __assign({\n    error: !!(touched && error),\n    helperText: touched && error\n  }, inputProps, props, {\n    fullWidth: true\n  }));\n};\n\nvar LoginForm = function (props) {\n  var redirectTo = props.redirectTo;\n\n  var _a = useSafeSetState(false),\n      loading = _a[0],\n      setLoading = _a[1];\n\n  var login = useLogin();\n  var translate = useTranslate();\n  var notify = useNotify();\n  var classes = useStyles(props);\n\n  var validate = function (values) {\n    var errors = {\n      username: undefined,\n      password: undefined\n    };\n\n    if (!values.username) {\n      errors.username = translate('ra.validation.required');\n    }\n\n    if (!values.password) {\n      errors.password = translate('ra.validation.required');\n    }\n\n    return errors;\n  };\n\n  var submit = function (values) {\n    setLoading(true);\n    login(values, redirectTo).then(function () {\n      setLoading(false);\n    }).catch(function (error) {\n      setLoading(false);\n      notify(typeof error === 'string' ? error : typeof error === 'undefined' || !error.message ? 'ra.auth.sign_in_error' : error.message, {\n        type: 'warning',\n        messageArgs: {\n          _: typeof error === 'string' ? error : error && error.message ? error.message : undefined\n        }\n      });\n    });\n  };\n\n  return React.createElement(Form, {\n    onSubmit: submit,\n    validate: validate,\n    render: function (_a) {\n      var handleSubmit = _a.handleSubmit;\n      return React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        noValidate: true\n      }, React.createElement(\"div\", {\n        className: classes.form\n      }, React.createElement(\"div\", {\n        className: classes.input\n      }, React.createElement(Field, {\n        autoFocus: true,\n        id: \"username\",\n        name: \"username\",\n        component: Input,\n        label: translate('ra.auth.username'),\n        disabled: loading\n      })), React.createElement(\"div\", {\n        className: classes.input\n      }, React.createElement(Field, {\n        id: \"password\",\n        name: \"password\",\n        component: Input,\n        label: translate('ra.auth.password'),\n        type: \"password\",\n        disabled: loading,\n        autoComplete: \"current-password\"\n      }))), React.createElement(CardActions, null, React.createElement(Button, {\n        variant: \"contained\",\n        type: \"submit\",\n        color: \"primary\",\n        disabled: loading,\n        className: classes.button\n      }, loading && React.createElement(CircularProgress, {\n        className: classes.icon,\n        size: 18,\n        thickness: 2\n      }), translate('ra.auth.sign_in'))));\n    }\n  });\n};\n\nLoginForm.propTypes = {\n  redirectTo: PropTypes.string\n};\nexport default LoginForm;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","PropTypes","Field","Form","Button","CardActions","CircularProgress","TextField","makeStyles","useTranslate","useLogin","useNotify","useSafeSetState","useStyles","theme","form","padding","input","marginTop","button","width","icon","marginRight","spacing","name","Input","_a","_b","meta","touched","error","inputProps","props","createElement","helperText","fullWidth","LoginForm","redirectTo","loading","setLoading","login","translate","notify","classes","validate","values","errors","username","undefined","password","submit","then","catch","message","type","messageArgs","_","onSubmit","render","handleSubmit","noValidate","className","autoFocus","id","component","label","disabled","autoComplete","variant","color","size","thickness","propTypes","string"],"sources":["/home/lightsong/workspace/freact/frontend/node_modules/ra-ui-materialui/esm/auth/LoginForm.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { Field, Form } from 'react-final-form';\nimport { Button, CardActions, CircularProgress, TextField, } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useTranslate, useLogin, useNotify, useSafeSetState } from 'ra-core';\nvar useStyles = makeStyles(function (theme) { return ({\n    form: {\n        padding: '0 1em 1em 1em',\n    },\n    input: {\n        marginTop: '1em',\n    },\n    button: {\n        width: '100%',\n    },\n    icon: {\n        marginRight: theme.spacing(1),\n    },\n}); }, { name: 'RaLoginForm' });\nvar Input = function (_a) {\n    var _b = _a.meta, touched = _b.touched, error = _b.error, // eslint-disable-line react/prop-types\n    inputProps = _a.input, // eslint-disable-line react/prop-types\n    props = __rest(_a, [\"meta\", \"input\"]);\n    return (React.createElement(TextField, __assign({ error: !!(touched && error), helperText: touched && error }, inputProps, props, { fullWidth: true })));\n};\nvar LoginForm = function (props) {\n    var redirectTo = props.redirectTo;\n    var _a = useSafeSetState(false), loading = _a[0], setLoading = _a[1];\n    var login = useLogin();\n    var translate = useTranslate();\n    var notify = useNotify();\n    var classes = useStyles(props);\n    var validate = function (values) {\n        var errors = { username: undefined, password: undefined };\n        if (!values.username) {\n            errors.username = translate('ra.validation.required');\n        }\n        if (!values.password) {\n            errors.password = translate('ra.validation.required');\n        }\n        return errors;\n    };\n    var submit = function (values) {\n        setLoading(true);\n        login(values, redirectTo)\n            .then(function () {\n            setLoading(false);\n        })\n            .catch(function (error) {\n            setLoading(false);\n            notify(typeof error === 'string'\n                ? error\n                : typeof error === 'undefined' || !error.message\n                    ? 'ra.auth.sign_in_error'\n                    : error.message, {\n                type: 'warning',\n                messageArgs: {\n                    _: typeof error === 'string'\n                        ? error\n                        : error && error.message\n                            ? error.message\n                            : undefined,\n                },\n            });\n        });\n    };\n    return (React.createElement(Form, { onSubmit: submit, validate: validate, render: function (_a) {\n            var handleSubmit = _a.handleSubmit;\n            return (React.createElement(\"form\", { onSubmit: handleSubmit, noValidate: true },\n                React.createElement(\"div\", { className: classes.form },\n                    React.createElement(\"div\", { className: classes.input },\n                        React.createElement(Field, { autoFocus: true, id: \"username\", name: \"username\", component: Input, label: translate('ra.auth.username'), disabled: loading })),\n                    React.createElement(\"div\", { className: classes.input },\n                        React.createElement(Field, { id: \"password\", name: \"password\", component: Input, label: translate('ra.auth.password'), type: \"password\", disabled: loading, autoComplete: \"current-password\" }))),\n                React.createElement(CardActions, null,\n                    React.createElement(Button, { variant: \"contained\", type: \"submit\", color: \"primary\", disabled: loading, className: classes.button },\n                        loading && (React.createElement(CircularProgress, { className: classes.icon, size: 18, thickness: 2 })),\n                        translate('ra.auth.sign_in')))));\n        } }));\n};\nLoginForm.propTypes = {\n    redirectTo: PropTypes.string,\n};\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}