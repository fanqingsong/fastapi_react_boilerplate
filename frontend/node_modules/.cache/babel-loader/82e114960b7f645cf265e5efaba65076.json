{"ast":null,"code":"/* jshint node:true */\n'use strict'; // Escape the textDelimiters contained in the field\n\n/*(https://tools.ietf.org/html/rfc4180)\n   7.  If double-quotes are used to enclose fields, then a double-quote\n   appearing inside a field must be escaped by preceding it with\n   another double quote.\n   For example: \"aaa\",\"b\"\"bb\",\"ccc\"\n*/\n\nmodule.exports = function escapedDelimiters(textDelimiter, rowDelimiter, forceTextDelimiter) {\n  var endOfLine = '\\n';\n\n  if (typeof textDelimiter !== 'string') {\n    throw new TypeError('Invalid param \"textDelimiter\", must be a string.');\n  }\n\n  if (typeof rowDelimiter !== 'string') {\n    throw new TypeError('Invalid param \"rowDelimiter\", must be a string.');\n  }\n\n  var textDelimiterRegex = new RegExp(\"\\\\\" + textDelimiter, 'g');\n  var escapedDelimiter = textDelimiter + textDelimiter;\n  var enclosingCondition = textDelimiter === '\"' ? function (value) {\n    return value.indexOf(rowDelimiter) >= 0 || value.indexOf(endOfLine) >= 0 || value.indexOf('\"') >= 0;\n  } : function (value) {\n    return value.indexOf(rowDelimiter) >= 0 || value.indexOf(endOfLine) >= 0;\n  };\n  return function (value) {\n    if (forceTextDelimiter) value = \"\" + value;\n    if (!value.replace) return value; // Escape the textDelimiters contained in the field\n\n    value = value.replace(textDelimiterRegex, escapedDelimiter); // Escape the whole field if it contains a rowDelimiter or a linebreak or double quote\n\n    if (forceTextDelimiter || enclosingCondition(value)) {\n      value = textDelimiter + value + textDelimiter;\n    }\n\n    return value;\n  };\n};","map":{"version":3,"names":["module","exports","escapedDelimiters","textDelimiter","rowDelimiter","forceTextDelimiter","endOfLine","TypeError","textDelimiterRegex","RegExp","escapedDelimiter","enclosingCondition","value","indexOf","replace"],"sources":["/home/lightsong/workspace/freact/frontend/node_modules/jsonexport/dist/core/escape-delimiters.js"],"sourcesContent":["/* jshint node:true */\n'use strict';\n\n// Escape the textDelimiters contained in the field\n/*(https://tools.ietf.org/html/rfc4180)\n   7.  If double-quotes are used to enclose fields, then a double-quote\n   appearing inside a field must be escaped by preceding it with\n   another double quote.\n   For example: \"aaa\",\"b\"\"bb\",\"ccc\"\n*/\n\nmodule.exports = function escapedDelimiters(textDelimiter, rowDelimiter, forceTextDelimiter) {\n  var endOfLine = '\\n';\n\n  if (typeof textDelimiter !== 'string') {\n    throw new TypeError('Invalid param \"textDelimiter\", must be a string.');\n  }\n\n  if (typeof rowDelimiter !== 'string') {\n    throw new TypeError('Invalid param \"rowDelimiter\", must be a string.');\n  }\n\n  var textDelimiterRegex = new RegExp(\"\\\\\" + textDelimiter, 'g');\n  var escapedDelimiter = textDelimiter + textDelimiter;\n\n  var enclosingCondition = textDelimiter === '\"' ? function (value) {\n    return value.indexOf(rowDelimiter) >= 0 || value.indexOf(endOfLine) >= 0 || value.indexOf('\"') >= 0;\n  } : function (value) {\n    return value.indexOf(rowDelimiter) >= 0 || value.indexOf(endOfLine) >= 0;\n  };\n\n  return function (value) {\n    if (forceTextDelimiter) value = \"\" + value;\n\n    if (!value.replace) return value;\n    // Escape the textDelimiters contained in the field\n    value = value.replace(textDelimiterRegex, escapedDelimiter);\n\n    // Escape the whole field if it contains a rowDelimiter or a linebreak or double quote\n    if (forceTextDelimiter || enclosingCondition(value)) {\n      value = textDelimiter + value + textDelimiter;\n    }\n\n    return value;\n  };\n};"],"mappings":"AAAA;AACA,a,CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,iBAAT,CAA2BC,aAA3B,EAA0CC,YAA1C,EAAwDC,kBAAxD,EAA4E;EAC3F,IAAIC,SAAS,GAAG,IAAhB;;EAEA,IAAI,OAAOH,aAAP,KAAyB,QAA7B,EAAuC;IACrC,MAAM,IAAII,SAAJ,CAAc,kDAAd,CAAN;EACD;;EAED,IAAI,OAAOH,YAAP,KAAwB,QAA5B,EAAsC;IACpC,MAAM,IAAIG,SAAJ,CAAc,iDAAd,CAAN;EACD;;EAED,IAAIC,kBAAkB,GAAG,IAAIC,MAAJ,CAAW,OAAON,aAAlB,EAAiC,GAAjC,CAAzB;EACA,IAAIO,gBAAgB,GAAGP,aAAa,GAAGA,aAAvC;EAEA,IAAIQ,kBAAkB,GAAGR,aAAa,KAAK,GAAlB,GAAwB,UAAUS,KAAV,EAAiB;IAChE,OAAOA,KAAK,CAACC,OAAN,CAAcT,YAAd,KAA+B,CAA/B,IAAoCQ,KAAK,CAACC,OAAN,CAAcP,SAAd,KAA4B,CAAhE,IAAqEM,KAAK,CAACC,OAAN,CAAc,GAAd,KAAsB,CAAlG;EACD,CAFwB,GAErB,UAAUD,KAAV,EAAiB;IACnB,OAAOA,KAAK,CAACC,OAAN,CAAcT,YAAd,KAA+B,CAA/B,IAAoCQ,KAAK,CAACC,OAAN,CAAcP,SAAd,KAA4B,CAAvE;EACD,CAJD;EAMA,OAAO,UAAUM,KAAV,EAAiB;IACtB,IAAIP,kBAAJ,EAAwBO,KAAK,GAAG,KAAKA,KAAb;IAExB,IAAI,CAACA,KAAK,CAACE,OAAX,EAAoB,OAAOF,KAAP,CAHE,CAItB;;IACAA,KAAK,GAAGA,KAAK,CAACE,OAAN,CAAcN,kBAAd,EAAkCE,gBAAlC,CAAR,CALsB,CAOtB;;IACA,IAAIL,kBAAkB,IAAIM,kBAAkB,CAACC,KAAD,CAA5C,EAAqD;MACnDA,KAAK,GAAGT,aAAa,GAAGS,KAAhB,GAAwBT,aAAhC;IACD;;IAED,OAAOS,KAAP;EACD,CAbD;AAcD,CAlCD"},"metadata":{},"sourceType":"script"}